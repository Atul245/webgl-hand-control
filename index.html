<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesture Particles - Hidden Heart</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="loading-screen" class="fixed inset-0 flex flex-col items-center justify-center text-white z-50 bg-black">
        <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mb-4"></div>
        <h2 class="text-2xl font-light tracking-widest mb-4">INITIALIZING SYSTEM</h2>
        <button id="start-btn" onclick="app.startApp()" class="hidden px-6 py-2 border border-purple-500 hover:bg-purple-500/20 rounded text-sm tracking-widest transition-all">
            ACTIVATE SYSTEM
        </button>
    </div>

    <audio id="bg-music" src="music.mp3" loop crossorigin="anonymous"></audio>

    <video id="video-input"></video>
    <div id="canvas-container"></div>

    <div class="fixed top-0 left-0 w-full h-full pointer-events-none z-20 p-4 flex flex-col justify-between">
        
        <div class="pointer-events-auto flex flex-wrap gap-4 justify-between items-start">
            <div class="glass-panel rounded-xl p-3 flex items-center gap-3">
                <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse" id="status-dot"></div>
                <div>
                    <h1 class="text-white text-xs font-bold tracking-wider">KINETIC PARTICLES</h1>
                    <p class="text-[10px] text-gray-400" id="status-text">Waiting for hands...</p>
                </div>
            </div>

            <div class="glass-panel rounded-xl p-2 flex items-center gap-2">
                <input type="text" id="text-input" placeholder="Type Name..." maxlength="12"
                    class="bg-transparent border border-white/20 rounded px-3 py-1 text-white text-sm w-32 md:w-48 placeholder-gray-500 focus:border-white/50 transition-colors"
                    onkeydown="if(event.key === 'Enter') app.processText()">
                <button onclick="app.processText()" class="bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 px-3 rounded transition-colors border border-white/10">GO</button>
            </div>

            <div class="glass-panel rounded-xl p-2 flex gap-2">
                <button onclick="app.setColor(0xff3366)" class="w-6 h-6 rounded-full bg-[#ff3366] hover:scale-110 transition-transform border border-white/20"></button>
                <button onclick="app.setColor(0x33ccff)" class="w-6 h-6 rounded-full bg-[#33ccff] hover:scale-110 transition-transform border border-white/20"></button>
                <button onclick="app.setColor(0x00ff99)" class="w-6 h-6 rounded-full bg-[#00ff99] hover:scale-110 transition-transform border border-white/20"></button>
                <button onclick="app.setColor(0xffcc33)" class="w-6 h-6 rounded-full bg-[#ffcc33] hover:scale-110 transition-transform border border-white/20"></button>
                <button onclick="app.setColor(0xffffff)" class="w-6 h-6 rounded-full bg-white hover:scale-110 transition-transform border border-white/20"></button>
            </div>
        </div>

        <div class="pointer-events-auto absolute top-20 right-4 glass-panel rounded-xl p-4 w-56">
            <h3 class="text-white text-xs font-bold mb-3 uppercase tracking-wider border-b border-white/10 pb-2">Control Guide</h3>
            <div class="mb-4">
                <h4 class="text-[10px] text-gray-400 uppercase mb-2">1 Hand Controls</h4>
                <div class="guide-item"><div class="guide-icon"><i data-lucide="move" class="w-3 h-3"></i></div><span><b>Move Hand:</b> Rotate</span></div>
                <div class="guide-item"><div class="guide-icon"><i data-lucide="refresh-cw" class="w-3 h-3"></i></div><span><b>Tilt Wrist:</b> Spin</span></div>
                <div class="guide-item"><div class="guide-icon"><i data-lucide="rocking-chair" class="w-3 h-3"></i></div><span><b>Rock ü§ò:</b> Next Shape</span></div>
                <div class="guide-item"><div class="guide-icon"><i data-lucide="palette" class="w-3 h-3"></i></div><span><b>Peace ‚úåÔ∏è:</b> Next Color</span></div>
            </div>
            <!-- <div>
                <h4 class="text-[10px] text-gray-400 uppercase mb-2">2 Hand Controls</h4>
                <div class="guide-item"><div class="guide-icon"><i data-lucide="heart" class="w-3 h-3"></i></div><span><b>Make Heart:</b> SECRET MODE</span></div>
                <div class="guide-item"><div class="guide-icon"><i data-lucide="scissors" class="w-3 h-3"></i></div><span><b>Pull Apart:</b> BREAK HEART</span></div>
                <div class="guide-item"><div class="guide-icon"><i data-lucide="zap" class="w-3 h-3"></i></div><span><b>Double Fist:</b> BLAST / RAIN</span></div>
            </div> -->
        </div>

        <div class="pointer-events-auto self-center glass-panel rounded-2xl p-2 flex gap-2 md:gap-4 mb-4 overflow-x-auto max-w-[95%] no-scrollbar">
            <button id="btn-sphere" onclick="app.setTemplate('sphere')" class="btn-option active group flex flex-col items-center justify-center w-14 h-14 rounded-xl border border-transparent"><i data-lucide="globe" class="text-white w-5 h-5"></i></button>
            <button id="btn-saturn" onclick="app.setTemplate('saturn')" class="btn-option group flex flex-col items-center justify-center w-14 h-14 rounded-xl border border-transparent"><i data-lucide="orbit" class="text-white w-5 h-5"></i></button>
            <button id="btn-flowers" onclick="app.setTemplate('flowers')" class="btn-option group flex flex-col items-center justify-center w-14 h-14 rounded-xl border border-transparent"><i data-lucide="flower-2" class="text-white w-5 h-5"></i></button>
            <button id="btn-fireworks" onclick="app.setTemplate('fireworks')" class="btn-option group flex flex-col items-center justify-center w-14 h-14 rounded-xl border border-transparent"><i data-lucide="sparkles" class="text-white w-5 h-5"></i></button>
            <button id="btn-dna" onclick="app.setTemplate('dna')" class="btn-option group flex flex-col items-center justify-center w-14 h-14 rounded-xl border border-transparent"><i data-lucide="dna" class="text-white w-5 h-5"></i></button>
            <button id="btn-cube" onclick="app.setTemplate('cube')" class="btn-option group flex flex-col items-center justify-center w-14 h-14 rounded-xl border border-transparent"><i data-lucide="box" class="text-white w-5 h-5"></i></button>
            <button id="btn-torus" onclick="app.setTemplate('torus')" class="btn-option group flex flex-col items-center justify-center w-14 h-14 rounded-xl border border-transparent"><i data-lucide="circle-dot" class="text-white w-5 h-5"></i></button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>