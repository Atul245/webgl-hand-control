<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesture Particles - Ultimate Edition</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="loading-screen" class="fixed inset-0 flex flex-col items-center justify-center text-white transition-opacity duration-1000">
        <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mb-4"></div>
        <h2 class="text-2xl font-light tracking-widest">INITIALIZING VISION</h2>
        <p class="text-gray-500 mt-2 text-sm">Please allow camera access</p>
    </div>

    <video id="video-input"></video>
    <div id="canvas-container"></div>

    <div class="fixed top-0 left-0 w-full h-full pointer-events-none z-20 p-4 flex flex-col justify-between">
        
        <div class="pointer-events-auto flex flex-wrap gap-4 justify-between items-start">
            
            <div class="glass-panel rounded-xl p-4 flex items-center gap-3">
                <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse" id="status-dot"></div>
                <div>
                    <h1 class="text-white text-sm font-bold tracking-wider">KINETIC PARTICLES</h1>
                    <p class="text-xs text-gray-400" id="status-text">Waiting for hands...</p>
                </div>
            </div>

            <div class="glass-panel rounded-xl p-2 flex items-center gap-2">
                <input type="text" id="text-input" placeholder="Type Name..." maxlength="12"
                    class="bg-transparent border border-white/20 rounded px-3 py-1 text-white text-sm w-32 md:w-48 placeholder-gray-500 focus:border-white/50 transition-colors"
                    onkeydown="if(event.key === 'Enter') app.processText()">
                <button onclick="app.processText()" 
                    class="bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 px-3 rounded transition-colors border border-white/10">
                    GO
                </button>
            </div>

            <div class="glass-panel rounded-xl p-2 flex gap-2">
                <button onclick="app.setColor(0xff3366)" class="w-6 h-6 rounded-full bg-[#ff3366] hover:scale-110 transition-transform border border-white/20"></button>
                <button onclick="app.setColor(0x33ccff)" class="w-6 h-6 rounded-full bg-[#33ccff] hover:scale-110 transition-transform border border-white/20"></button>
                <button onclick="app.setColor(0x00ff99)" class="w-6 h-6 rounded-full bg-[#00ff99] hover:scale-110 transition-transform border border-white/20"></button>
                <button onclick="app.setColor(0xffcc33)" class="w-6 h-6 rounded-full bg-[#ffcc33] hover:scale-110 transition-transform border border-white/20"></button>
                <button onclick="app.setColor(0xffffff)" class="w-6 h-6 rounded-full bg-white hover:scale-110 transition-transform border border-white/20"></button>
            </div>
        </div>

        <div class="pointer-events-auto absolute top-20 right-4 glass-panel rounded-xl p-4 w-56">
            <h3 class="text-white text-xs font-bold mb-3 uppercase tracking-wider border-b border-white/10 pb-2">Control Guide</h3>
            
            <div class="mb-4">
                <h4 class="text-[10px] text-gray-400 uppercase mb-2">1 Hand Controls</h4>
                <div class="guide-item">
                    <div class="guide-icon"><i data-lucide="move" class="w-3 h-3"></i></div>
                    <span><b>Move Hand:</b> Rotate</span>
                </div>
                <div class="guide-item">
                    <div class="guide-icon"><i data-lucide="refresh-cw" class="w-3 h-3"></i></div>
                    <span><b>Tilt Wrist:</b> Spin (360)</span>
                </div>
                <div class="guide-item">
                    <div class="guide-icon"><i data-lucide="rocking-chair" class="w-3 h-3"></i></div>
                    <span><b>Rock Sign ü§ò:</b> Swap Shape</span>
                </div>
                <div class="guide-item">
                    <div class="guide-icon"><i data-lucide="palette" class="w-3 h-3"></i></div>
                    <span><b>Peace Sign ‚úåÔ∏è:</b> Swap Color</span>
                </div>
                <div class="guide-item">
                    <div class="guide-icon"><i data-lucide="octagon" class="w-3 h-3"></i></div>
                    <span><b>Fist ‚úä:</b> Black Hole</span>
                </div>
            </div>

            <div>
                <h4 class="text-[10px] text-gray-400 uppercase mb-2">2 Hand Controls</h4>
                <div class="guide-item">
                    <div class="guide-icon"><i data-lucide="arrow-left-right" class="w-3 h-3"></i></div>
                    <span><b>Stretch:</b> Rubber Band</span>
                </div>
                <div class="guide-item">
                    <div class="guide-icon"><i data-lucide="zap" class="w-3 h-3"></i></div>
                    <span><b>Clap:</b> SONIC BLAST</span>
                </div>
            </div>
        </div>

        <div class="pointer-events-auto absolute bottom-28 right-4 md:bottom-32 md:right-4 w-32 h-24 glass-panel rounded-lg overflow-hidden border border-gray-700">
            <canvas id="camera-feed" class="w-full h-full object-cover transform scale-x-[-1]"></canvas>
            <div class="absolute bottom-1 left-1 text-[10px] text-white bg-black/50 px-1 rounded">DEBUG VIEW</div>
        </div>

        <div class="pointer-events-auto self-center glass-panel rounded-2xl p-2 flex gap-2 md:gap-4 mb-4 overflow-x-auto max-w-[95%] no-scrollbar">
            <button onclick="app.setTemplate('sphere')" class="btn-option active group flex flex-col items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-xl border border-transparent">
                <i data-lucide="globe" class="text-white mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] text-gray-300 uppercase tracking-wide">Sphere</span>
            </button>
            <button onclick="app.setTemplate('saturn')" class="btn-option group flex flex-col items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-xl border border-transparent">
                <i data-lucide="orbit" class="text-white mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] text-gray-300 uppercase tracking-wide">Saturn</span>
            </button>
            <button onclick="app.setTemplate('flowers')" class="btn-option group flex flex-col items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-xl border border-transparent">
                <i data-lucide="flower-2" class="text-white mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] text-gray-300 uppercase tracking-wide">Flower</span>
            </button>
            <button onclick="app.setTemplate('fireworks')" class="btn-option group flex flex-col items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-xl border border-transparent">
                <i data-lucide="sparkles" class="text-white mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] text-gray-300 uppercase tracking-wide">Chaos</span>
            </button>
            <button onclick="app.setTemplate('dna')" class="btn-option group flex flex-col items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-xl border border-transparent">
                <i data-lucide="dna" class="text-white mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] text-gray-300 uppercase tracking-wide">DNA</span>
            </button>
            <button onclick="app.setTemplate('cube')" class="btn-option group flex flex-col items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-xl border border-transparent">
                <i data-lucide="box" class="text-white mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] text-gray-300 uppercase tracking-wide">Cube</span>
            </button>
            <button onclick="app.setTemplate('torus')" class="btn-option group flex flex-col items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-xl border border-transparent">
                <i data-lucide="circle-dot" class="text-white mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] text-gray-300 uppercase tracking-wide">Donut</span>
            </button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>